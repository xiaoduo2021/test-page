<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>我的多大2021</title>
    <meta name="theme-color" content="#f00" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, minimal-ui"
    />
    <meta name="full-screen" content="yes" />
    <meta name="browsermode" content="application" />
    <meta name="x5-fullscreen" content="true" />
    <meta name="x5-page-mode" content="app" />
    <meta name="apple-mobile-web-app-title" content="我的多大2021" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="format-detection" content="telephone=no, email=no" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/fullpage.js@2.9/dist/jquery.fullpage.css"
    />
    <link rel="stylesheet" href="./css/main.css" />
  </head>

  <body>
    <div id="app">
      <section class="section page page-1 page-home" id="page1">
        <div class="bg-back"></div>
        <div class="title-wrapper">
          <h1 class="title title-1"></h1>
        </div>
        <div class="nickname" id="nickname"></div>
        <a class="button">
          <span>立即<br />查看</span>
        </a>
        <div class="card"></div>
      </section>
      <section class="section page page-2" id="page2">
        <div class="night night-1"></div>
        <div class="night night-2"></div>
        <div class="stars">
          <span class="star star-1"></span>
          <span class="star star-2"></span>
          <span class="star star-3"></span>
          <span class="star star-4"></span>
        </div>
        <div class="meteors">
          <span class="meteor meteor-1"></span>
          <span class="meteor meteor-2"></span>
        </div>
        <div class="moon-wrapper"></div>
        <div class="moon">
          <div class="swing">
            <div class="man"></div>
          </div>
        </div>
        <div class="building building-1"></div>
        <div class="content">
          <p class="para">这一年里</p>
          <p class="para mt-10">
            TA一共上了<span class="fs-18 fc-red" id="totalCredits">4.5</span
            >个学分的课程
          </p>
          <p class="para mt-10">
            完成了大学生涯的<span class="fs-18 fc-red" id="finishedPercentage"
              >20%</span
            >
          </p>
          <p class="para mt-35">
            这一年TA一共上了<span class="fs-18 fc-red" id="totalHours">340</span
            >小时的课
          </p>
          <p class="para mt-10">相信TA一定学到了不少知识吧</p>
        </div>
      </section>
      <section class="section page page-4" id="page3">
        <div class="wave1 wave1-1">
          <div class="ripple"></div>
        </div>
        <div class="wave1 wave1-2"></div>
        <div class="wave2 wave2-1"></div>
        <div class="wave2 wave2-2"></div>
        <div class="circle"></div>
        <div class="man-wrapper">
          <div class="splash"></div>
          <div class="man"></div>
        </div>
        <div class="content">
          <p class="para">
            TA 2021年的课大部分都在<span class="fc-red" id="frequentTime"
              >早上</span
            >
          </p>
          <p class="para para-2">因此获得称号</p>
          <p class="para para-2">
            <span class="fc-red" id="givenTitle">【早起狂人】</span>
          </p>
          <p class="para para-2">TA一定是有什么特殊的排课技巧</p>
        </div>
      </section>
      <section class="section page page-11" id="page4">
        <div class="bottom"></div>
        <div class="orb"></div>
        <div class="planet-wrapper">
          <div class="sun sun-1"></div>
          <svg class="spin" viewBox="-20 -20 670 320">
            <g
              id="PlanetALL"
              stroke="none"
              stroke-width="1"
              fill="none"
              fill-rule="evenodd"
            >
              <g
                id="planetPage"
                transform="translate(-121.000000, -821.000000)"
              >
                <g
                  id="planetGroup"
                  transform="translate(106.000000, 787.000000)"
                >
                  <path
                    id="bigPath"
                    d="M341.77773,207.923971 C511.478165,159.263154 641.40229,93.1535859 631.971387,60.2641167 C622.540483,27.3746476 477.325842,40.1598508 307.625407,88.8206674 C137.924973,137.481484 8.00084696,203.591053 17.4317505,236.480522 C26.862654,269.369991 172.077295,256.584788 341.77773,207.923971 Z"
                    stroke="#000000"
                    stroke-width="2"
                  ></path>
                  <circle id="big3" fill="#A31B01" cx="0" cy="0" r="14">
                    <animateMotion
                      begin="0s"
                      dur="15s"
                      rotate="auto"
                      repeatCount="indefinite"
                    >
                      <mpath
                        xmlns:xlink="http://www.w3.org/1999/xlink"
                        xlink:href="#bigPath"
                      ></mpath>
                    </animateMotion>
                  </circle>
                  <circle id="big2" fill="#A31B01" cx="0" cy="0" r="17.5">
                    <animateMotion
                      begin="0s"
                      dur="15s"
                      rotate="auto"
                      repeatCount="indefinite"
                    >
                      <mpath
                        xmlns:xlink="http://www.w3.org/1999/xlink"
                        xlink:href="#bigPath"
                      ></mpath>
                    </animateMotion>
                  </circle>
                  <circle id="big1" fill="#A31B01" cx="0" cy="0" r="9">
                    <animateMotion
                      begin="-11s"
                      dur="15s"
                      rotate="auto"
                      repeatCount="indefinite"
                    >
                      <mpath
                        xmlns:xlink="http://www.w3.org/1999/xlink"
                        xlink:href="#bigPath"
                      ></mpath>
                    </animateMotion>
                  </circle>
                  <path
                    id="smallPath"
                    d="M366.553285,177.547385 C491.139407,141.822889 586.568404,93.4445038 579.699915,69.4912365 C572.831426,45.5379693 466.266409,55.0804353 341.680286,90.804931 C217.094164,126.529427 121.665167,174.907812 128.533656,198.86108 C135.402145,222.814347 241.967163,213.271881 366.553285,177.547385 Z"
                    stroke="#000000"
                    stroke-width="2"
                  ></path>
                  <circle id="small1" fill="#A31B01" cx="0" cy="0" r="11.5">
                    <animateMotion
                      begin="0s"
                      dur="10s"
                      rotate="auto"
                      repeatCount="indefinite"
                    >
                      <mpath
                        xmlns:xlink="http://www.w3.org/1999/xlink"
                        xlink:href="#smallPath"
                      ></mpath>
                    </animateMotion>
                  </circle>
                  <circle id="small2" fill="#A31B01" cx="0" cy="0" r="12.5">
                    <animateMotion
                      begin="-3.3s"
                      dur="10s"
                      rotate="auto"
                      repeatCount="indefinite"
                    >
                      <mpath
                        xmlns:xlink="http://www.w3.org/1999/xlink"
                        xlink:href="#smallPath"
                      ></mpath>
                    </animateMotion>
                  </circle>
                  <circle id="small3" fill="#A31B01" cx="0" cy="0" r="7">
                    <animateMotion
                      begin="-6.6s"
                      dur="10s"
                      rotate="auto"
                      repeatCount="indefinite"
                    >
                      <mpath
                        xmlns:xlink="http://www.w3.org/1999/xlink"
                        xlink:href="#smallPath"
                      ></mpath>
                    </animateMotion>
                  </circle>
                  <circle id="small4" fill="#A31B01" cx="0" cy="0" r="7">
                    <animateMotion
                      begin="-4s"
                      dur="10s"
                      rotate="auto"
                      repeatCount="indefinite"
                    >
                      <mpath
                        xmlns:xlink="http://www.w3.org/1999/xlink"
                        xlink:href="#smallPath"
                      ></mpath>
                    </animateMotion>
                  </circle>
                  <circle id="small5" fill="#A31B01" cx="0" cy="0" r="4">
                    <animateMotion
                      begin="-0.7s"
                      dur="10s"
                      rotate="auto"
                      repeatCount="indefinite"
                    >
                      <mpath
                        xmlns:xlink="http://www.w3.org/1999/xlink"
                        xlink:href="#smallPath"
                      ></mpath>
                    </animateMotion>
                  </circle>
                </g>
              </g>
            </g>
          </svg>
          <div class="sun sun-2"></div>
        </div>
        <div class="content">
          <p class="para">这一年，TA给多大交的学费</p>
          <p class="para para-1">
            可以买<span class="fs-18 fc-red" id="itemsCanBeBought"
              >120支香奈儿口红</span
            >
          </p>
          <br />
          <p class="para para-1">
            如果用这些钱来投资<span class="fs-18 fc-red" id="investName"
              >比特币</span
            >
          </p>
          <p class="para para-1">
            <span class="fs-18 fc-red" id="returnInItems">10个iPhone</span>
          </p>
          <p class="para para-1">看来知识确实是力量呀</p>
        </div>
      </section>
      <section class="section page page-12" id="page5">
        <div class="info">
          <div class="photo-wrapper">
            <div class="photo">
              <img id="avatar" aleft="" class="pic" />
              <div class="man"></div>
            </div>
          </div>
          <div class="content">
            <div class="name f-thide" id="bestCourse">CSC108H5F</div>
            <p class="para">是TA的2021学得最好的课</p>
            <p class="para">
              <span class="fs-18 fc-red" id="bestLevel">勇夺A+</span>
            </p>
          </div>
        </div>
        <div class="waves">
          <div class="wave wave-1"></div>
          <div class="wave wave-2"></div>
          <div class="wave wave-3"></div>
          <div class="wave wave-4"></div>
        </div>
        <ul class="lines" id="courseHighlights">
          <li class="line line-1"><span class="text">CSC148H5F勇夺A</span></li>
          <li class="line line-2"><span class="text">MAT135Y5Y勇夺A</span></li>
          <li class="line line-3"><span class="text">MAT102H5F勇夺A</span></li>
        </ul>
      </section>
      <section class="section page page-9" id="page6">
        <div class="bottom"></div>
        <div class="calendar-wrapper">
          <div class="calendar"></div>
          <div class="man"></div>
        </div>
        <div class="leaves-wrapper"></div>
        <div class="content">
          <p class="para">这一年</p>
          <p class="para">
            <span class="fc-red" id="gradeLevel">非常高的成绩</span>
          </p>
          <p class="para para-1">
            <span class="fs-18 fc-red" id="description">我是彩虹屁</span>
          </p>
        </div>
      </section>
      <section class="section page page-16">
        <div class="arrow"></div>
        <div class="slogan">
          <span class="text"
            >下载<span class="fs-18 fc-red">小多课程表</span
            ><br />开启你的2021多大年度总结</span
          >
        </div>
        <div class="video-wrapper">
          <div class="video">
            <div class="inner">
              <div class="pic">
                <img src="./assets/qr.png" aleft="" class="image" />
                <span class="text">打开APP，活动入口在百宝箱等你噢</span>
              </div>
            </div>
          </div>
        </div>
        <div class="buttons">
          <a href="javascript:;" class="button">重温TA的2021</a>
        </div>
      </section>
    </div>
    <!-- lib -->
    <script src="https://unpkg.com/jquery@1.11.1/dist/jquery.min.js"></script>
    <!-- <script src="https://unpkg.com/jplayer@2.9.2/dist/jplayer/jquery.jplayer.min.js"></script> -->
    <script src="https://unpkg.com/fullpage.js@2.9.5/dist/jquery.fullpage.js"></script>
    <!-- components -->
    <script src="./js/App.js"></script>
    <!-- main -->
    <script lang="javascript">
      jQuery(document).ready(function($) {
        $('#app').fullpage({
          onLeave: function(index, nextIndex, direction) {
            console.log(index + ' leave direction: ' + direction);
          },
          afterLoad: function(anchorLink, index) {
            console.log(index + ' loaded');
          },
          sectionColor: ['yellow', 'green', 'blue', 'purple'],
          fadingEffect: true
        });

        /*前往正文页面=>立即查看*/
        $('#app .page-1 .button').click(function() {
          $.fn.fullpage.moveSectionDown();
        });

        /*回顶部=>重温TA的2017*/
        $('#app .page-16 .buttons .button').click(function() {
          $.fn.fullpage.moveTo(1, 0);
        });

        /*测试*/
        // $.fn.fullpage.moveTo(5, 0);

        // const API = `http://192.168.2.32:3000`
        const API = `https://duo-timetable-api.herokuapp.com/`

        $.post(`${API}/application/ca-utsg/data`,
        {
          appId: 'lookback_2021',
          payload: {
            method: 'get',
            id: new URLSearchParams(window.location.search).get('id')
          }
        },
        function(data, status){
          if (status === 'success') {
            renderPage(data.data)
          }
        });


        function renderPage(data) {
          if (data.page1) {
            $('#nickname').html(data.page1.nickname)
          } else {
            $('#page1').remove()
          }

          if (data.page2) {
            $('#totalCredits').html(data.page2.totalCredits)
            $('#finishedPercentage').html(`${data.page2.finishedPercentage}%`)
            $('#totalHours').html(data.page2.totalHours)
          } else {
            $('#page2').remove()
          }

          if (data.page3) {
            $('#frequentTime').html(data.page3.frequentTime)
            $('#givenTitle').html(data.page3.givenTitle)
          } else {
            $('#page3').remove()
          }

          if (data.page4) {
            $('#itemsCanBeBought').html(data.page4.itemsCanBeBought)
            $('#investName').html(data.page4.investName)
            $('#returnInItems').html(data.page4.returnInItems)
          } else {
            $('#page4').remove()
          }

          if (data.page5) {
            $('#avatar').attr("src", data.page5.avatar)
            $('#bestCourse').html(data.page5.bestCourse)
            $('#bestLevel').html(data.page5.bestLevel)
            $('#courseHighlights').html(data.page5.otherHighlights.map((item, index) => `<li class="line line-${index}"><span class="text">${item}</span></li>`))
          } else {
            $('#page5').remove()
          }

          if (data.page6) {
            $('#gradeLevel').html(data.page6.gradeLevel)
            $('#description').html(`『${data.page6.description}』`)
          } else {
            $('#page6').remove()
          }
        }
      });
    </script>
  </body>
</html>
